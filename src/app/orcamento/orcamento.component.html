<div class="orcamentos-page">
  <p *ngIf="message" class="message">{{ message }}</p>

  <!-- HEADER -->
  <div class="orcamentos-header">
    <h1>Orçamentos</h1>
    <div class="orcamentos-search">
      <input
        type="text"
        [(ngModel)]="searchInput"
        placeholder="Buscar orçamentos ..."
      />
      <button (click)="handleSearch()">Buscar</button>
    </div>
  </div>

  <!-- TABLE -->
  <div *ngIf="orcamentos.length > 0">
    <table class="orcamentos-table">
      <thead>
        <tr>
          <th>TIPO</th>
          <th>STATUS</th>
          <th>PREÇO TOTAL</th>
          <th>TOTAL DE PRODUTOS</th>
          <th>DATA</th>
          <th>AÇÕES</th>
        </tr>
      </thead>

      <tbody>
        <tr *ngFor="let orcamento of orcamentos">
          <td>{{ orcamento.tipoOrcamento }}</td>

          <!-- STATUS como badge -->
          <td>
            <span
              class="status-badge"
              [ngClass]="{
                'status-completo': orcamento.status === 'COMPLETO',
                'status-pendente': orcamento.status === 'PENDENTE',
                'status-cancelado': orcamento.status === 'CANCELADO'
              }"
            >
              {{ orcamento.status }}
            </span>
          </td>

          <td>R$ {{ orcamento.precoTotal }}</td>
          <td>{{ orcamento.totalProdutos }}</td>
          <td>{{ orcamento.dataCriacao | date : "short" }}</td>
          <td>
            <button (click)="navigateTOOrcamentosDetailsPage(orcamento.id)">
              Ver detalhes
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <app-pagination
    [currentPage]="currentPage"
    [totalPages]="totalPages"
    (pageChange)="onPageChange($event)"
  >
  </app-pagination>
</div>
